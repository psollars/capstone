welcome back to math methods for
data science. In this video, we're talking about the coupon collector
problem in the coupon collector problem. Every morning you open up
a new box of breakfast cereal, each box contains one of six coupons
selected uniformly at random. The question is, how many days will it take an expectation
to collect all six coupons? So we're going to define the random
variable X as the number of days it takes to collect all six coupons and X one is going to be the number of days
it takes to collect the first coupon. X 2 is the number of days it takes to
get two distinct coupons after already having one coupon X 3 is the number of
days it takes to collect three distinct coupons after already having two
distinct coupons and so on and so forth. The X six is the amount of days it takes
to collect the sixth coupon after having five distinct coupons. Okay, now we're going to
use our linear narrative expectation we're trying to
compute the expected value of X, and this is just equal to
the expected value of X one, plus the expected value of X two and
so on so forth. How many days does it take to
collect the first distinct coupon? Well, on the first day, you will get a coupon anyone have had it
before because you have no coupons so it takes one day how many days does
take Took the second group on. Well, the chance that you get a new coupon
is 5/6 because you have, one coupon. So there's one in six chance you get the
same coupon is before in a 56 chance to get a new coupon we saw before that if
you have an event that happens with probability P, it takes an expectation one
overpay trials to get that event to occur. So the number of trials it takes
to get the second coupon and expectation is one over 5/6,
which is just 6/5. Similarly, to collect the third coupon, you need to get a coupon
different than the first two so this event happens with probability
two thirds and so they expected. Time is three halves the fourth
coupon you need to choose one different than the first three. You have a half chance of doing that so
the time it takes is to for the fifth coupon, you need to get
one distinct from the first four, you'll get a new one with probability 1/3. So it takes an expected time three and for
your last coupon, you only have a one in six chance of getting that final coupon so
it takes an expectation time six. Okay, so if we just add these up Yes, I get one two three plus 11 is 14. Plus we had 1/5 her in one half here so that's one over five, okay plus one half. She's just going to be 14 point
let's see that's 0.0.2 plus 14.7. So it takes 14.7 days and expectation to collect all the coupons. Now, let's generalize this a little bit
to the case where we have instead of six coupons and
coupons that were trying to collect, how many days and expectation will
it take to collect all the coupons? Well, consent it up as before,
and we're going to take our summation over the the time
it takes to get the ice coupon How long does it take to get
the ice coupon in general? Well, [COUGH] we saw that we
already have I minus one coupons, and we need a different one so
the chance that we draw a different coupon is going to
be n minus I minus one over N. And so
this is our chance of success here, and the number of trials it takes to achieve
the success is one over this value. So this is just going to be one over, so we just flip it n over
n minus i minus one. Okay, so for the first coupon eyes
going to be equal to one, this will be an over and which is one so it takes one
step on average to get the first coupon. The second coupon is going to be end
over end minus one and so on, so forth until the last coupon
takes an expected time end, which is just what we saw on
the previous page for six. Now this here equals we can
pull the an outfront, and then it's just the summation
iequals one to end. If we kind of count backwards,
the last valley for I equals end was one over end here, and each time the denominator
decreases by one, moving backwards until they get toe one. So this is actually if we
just switch the order simply the summation of one over I okay,
so the expected time it will take is end times a summation
from of one to end of one over I. This particular summation here okay, is special it's called
the Harmonic Siri's, and it's denoted h event so that time it takes an expectation,
is N times H seven. Now it's a bend, it's well known that
there's there's a nice bound for this. Each event is always great, greater than equal toe log in and
less than log and plus one. So, really, this is approximately
end times the natural log of n time, an expectation to clear
collect all end coupons. And this comes up maybe more often
than you'd think for example, how many samples do I need to take in
order that I see all the different possible labels of the data or
things like this in data science? It's a handy formula to know that it
takes n log in time to collect and coupons, but it also is a nice
illustration of some of the techniques that we've learned in previous videos